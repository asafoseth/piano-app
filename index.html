<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Simplified iOS viewport for better pinch-zoom -->
    <meta name="viewport" content="width=1024, initial-scale=0.5, user-scalable=yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <title>UA Piano (Demo)</title>
    <!-- Style CSS -->
    <link rel="stylesheet" href="css/style.css">
    <script>
      // Simplified iOS zoom - No interference with pinch-to-zoom
      window.addEventListener('DOMContentLoaded', function() {
        // Detect iOS devices specifically
        const isIOSDevice = /iPad|iPhone|iPod/.test(navigator.userAgent);
        const isSafari = /Safari/.test(navigator.userAgent) && !/Chrome/.test(navigator.userAgent);
        
        if (isIOSDevice && isSafari) {
          console.log('iOS detected - enabling natural pinch-zoom');
          
          // Just ensure no conflicting styles
          document.body.style.transform = "";
          document.body.style.zoom = "";
          document.body.style.width = "";
          document.body.style.height = "";
          
          // Add simple CSS for iOS optimization
          const style = document.createElement('style');
          style.textContent = `
            /* iOS pinch-zoom optimization */
            * {
              -webkit-user-select: none;
              -webkit-touch-callout: none;
              user-select: none;
            }
            
            /* Allow natural zooming */
            html {
              -webkit-text-size-adjust: none;
              text-size-adjust: none;
            }
            
            /* Ensure piano doesn't break during zoom */
            .piano-container {
              position: relative;
            }
            
            .piano-keys {
              display: flex !important;
              flex-wrap: nowrap !important;
            }
          `;
          document.head.appendChild(style);
        }
      });
    </script>
    </script>
    </script>
  </head>
  <body>
    <header>
      <nav>
        <div class="nav-group" style="display: flex; align-items: center; gap: 10px;">
          <a href="#" class="nav-button">Home</a>
          <a href="#" id="show-about-modal" class="nav-button">About</a>
          <span id="user-info" style="display:none; color:#fff; font-weight:500; margin-left:10px;"></span>
          <button id="show-login-modal">Login</button>
          <!-- If you have a logout button, add it here and toggle with JS -->
          <!-- <button id="logout-btn" style="display:none;">Logout</button> -->
        </div>
        <button id="save-tab-btn" style="display:none;">Save TAB</button>
        <button id="import-tab-btn" style="display:none;">Import TAB</button>
      </nav>
    </header>
    <div class="main">
        <div class="container">

        <h1>uncle Ali Piano</h1>

        <!-- Container for the two contro-->
        <div class="controls-row">
            <!-- Left Column: TAB Feature -->
            <div class="tab-column">
                <!-- TAB Feature Section -->
                <div class="tab-feature-container">
                    <h2>TAB</h2>
                    <div class="tab-controls">
                        <!-- Find the Beat ON/OFF button, assumed to be: -->
<button id="tab-feature-toggle">Beat: OFF</button>
<!-- Place the undo/redo buttons just before or after it: -->
<div style="display:inline-block; vertical-align:middle; margin-right:8px;">
  <button id="undo-btn" title="Undo" style="font-size:1.3em; background: #ffe600; border: none; cursor: pointer; vertical-align: middle; border-radius: 50%; width: 2.2em; height: 2.2em; display: inline-flex; align-items: center; justify-content: center; box-shadow: 0 1px 4px #ccc;">
    &#8630;
  </button>
  <button id="redo-btn" title="Redo" style="font-size:1.3em; background: #ffe600; border: none; cursor: pointer; vertical-align: middle; border-radius: 50%; width: 2.2em; height: 2.2em; display: inline-flex; align-items: center; justify-content: center; box-shadow: 0 1px 4px #ccc;">
    &#8631;
  </button>
</div>
                        <div class="beat-track-select-container">
                            <label for="beat-track-select">Beat Track:</label>
                            <select id="beat-track-select">
                                <option value="track1">Track 1</option>
                                <option value="track2">Track 2</option>
                                <option value="track3">Track 3</option>
                            </select>
                        </div>
                    </div>
                    <!-- TAB Note Inputs -->
                    <div class="tab-note-inputs">
                        <!-- Generate 16 fields -->
                        <!-- You can use a loop in JS, but for static HTML, just copy 16 times -->
                        <div class="tab-note-entry" data-entry-index="0">
                            <div class="tab-input-wrapper">
                                <input type="text" class="tab-note-input" data-original-input="true" placeholder="Note 1 ID">
                            </div>
                        </div>
                        <div class="tab-note-entry" data-entry-index="1">
                            <div class="tab-input-wrapper">
                                <input type="text" class="tab-note-input" data-original-input="true" placeholder="Note 2 ID">
                            </div>
                        </div>
                        <div class="tab-note-entry" data-entry-index="2">
                            <div class="tab-input-wrapper">
                                <input type="text" class="tab-note-input" data-original-input="true" placeholder="Note 3 ID">
                            </div>
                        </div>
                        <div class="tab-note-entry" data-entry-index="3">
                            <div class="tab-input-wrapper">
                                <input type="text" class="tab-note-input" data-original-input="true" placeholder="Note 4 ID">
                            </div>
                        </div>
                        <div class="tab-note-entry" data-entry-index="4">
                            <div class="tab-input-wrapper">
                                <input type="text" class="tab-note-input" data-original-input="true" placeholder="Note 5 ID">
                            </div>
                        </div>
                        <div class="tab-note-entry" data-entry-index="5">
                            <div class="tab-input-wrapper">
                                <input type="text" class="tab-note-input" data-original-input="true" placeholder="Note 6 ID">
                            </div>
                        </div>
                        <div class="tab-note-entry" data-entry-index="6">
                            <div class="tab-input-wrapper">
                                <input type="text" class="tab-note-input" data-original-input="true" placeholder="Note 7 ID">
                            </div>
                        </div>
                        <div class="tab-note-entry" data-entry-index="7">
                            <div class="tab-input-wrapper">
                                <input type="text" class="tab-note-input" data-original-input="true" placeholder="Note 8 ID">
                            </div>
                        </div>
                        <div class="tab-note-entry" data-entry-index="8">
                            <div class="tab-input-wrapper">
                                <input type="text" class="tab-note-input" data-original-input="true" placeholder="Note 9 ID">
                            </div>
                        </div>
                        <div class="tab-note-entry" data-entry-index="9">
                            <div class="tab-input-wrapper">
                                <input type="text" class="tab-note-input" data-original-input="true" placeholder="Note 10 ID">
                            </div>
                        </div>
                        <div class="tab-note-entry" data-entry-index="10">
                            <div class="tab-input-wrapper">
                                <input type="text" class="tab-note-input" data-original-input="true" placeholder="Note 11 ID">
                            </div>
                        </div>
                        <div class="tab-note-entry" data-entry-index="11">
                            <div class="tab-input-wrapper">
                                <input type="text" class="tab-note-input" data-original-input="true" placeholder="Note 12 ID">
                            </div>
                        </div>
                        <div class="tab-note-entry" data-entry-index="12">
                            <div class="tab-input-wrapper">
                                <input type="text" class="tab-note-input" data-original-input="true" placeholder="Note 13 ID">
                            </div>
                        </div>
                        <div class="tab-note-entry" data-entry-index="13">
                            <div class="tab-input-wrapper">
                                <input type="text" class="tab-note-input" data-original-input="true" placeholder="Note 14 ID">
                            </div>
                        </div>
                        <div class="tab-note-entry" data-entry-index="14">
                            <div class="tab-input-wrapper">
                                <input type="text" class="tab-note-input" data-original-input="true" placeholder="Note 15 ID">
                            </div>
                        </div>
                        <div class="tab-note-entry" data-entry-index="15">
                            <div class="tab-input-wrapper">
                                <input type="text" class="tab-note-input" data-original-input="true" placeholder="Note 16 ID">
                            </div>
                        </div>
                    </div>
                    <div class="tab-action-buttons">
                        <button id="play-tab-btn">Play TAB</button>
                        <button id="delete-tab-btn" style="background:#d32f2f; color:#fff;">Delete</button>
                        <button id="reset-tab-btn" style="background:#ffe600; color:#222;">Reset TAB</button>
                    </div>
                </div>
            </div>

            <!-- Right Column: Other Controls -->
            <div class="other-controls-column" style="margin-top:180px;">
                <!-- Transpose Controls -->
                <div class="transpose-container">
                    <label for="transpose-value">Transpose:</label>
                    <button class="transpose-btn" id="transpose-up">+</button>
                    <span id="transpose-value">0</span>
                    <button class="transpose-btn" id="transpose-down">-</button>
                </div>

                <!-- Container for the Chord Mode toggle button and key switcher buttons -->
                <div class="controls-container">
                    <div class="key-switcher-container">
                        <label for="key-switcher-select">Select Key (UAT ruler):</label>
                        <select id="key-switcher-select">
                            <option value="C">C</option><option value="C#">C#</option><option value="D">D</option><option value="D#">D#</option><option value="E">E</option><option value="F">F</option><option value="F#">F#</option><option value="G">G</option><option value="G#">G#</option><option value="A">A</option><option value="A#">A#</option><option value="B">B</option>
                        </select>
                    </div>
                    <!-- Sync Key Finder and Volume Controls -->
                    <div class="sync-controls-container">
                        <label for="syncKeyFinderToggle">
                            <input type="checkbox" id="syncKeyFinderToggle"> Enable Sing Key
                        </label>
                    </div>
                    <div style="display:flex; justify-content:center; margin-top:10px;">
                        <button id="chord-mode-toggle">Chord Mode: OFF</button>
                    </div>
                </div>
            </div>

        </div>

        <!-- TAB Feature Section -->
        <!-- Container for Piano Keys -->
        <h2 class="piano-title">uncle Ali Piano</h2>
        <div class="piano-container" id="keyboard-container"></div>

        <!-- Feedback Section -->
        <section id="feedback-section" class="feedback-section">
            <div class="feedback-container">
                <h3 class="feedback-title">What do you think?</h3>
                <div class="feedback-buttons">
                    <button id="like-btn" class="feedback-btn like-btn" aria-label="Like this piano session">
                        <span class="emoji">👍</span>
                        <span id="like-count" class="count">0</span>
                    </button>
                    <button id="dislike-btn" class="feedback-btn dislike-btn" aria-label="Dislike this piano session">
                        <span class="emoji">👎</span>
                        <span id="dislike-count" class="count">0</span>
                    </button>
                </div>
                <p class="feedback-message" id="feedback-message"></p>
            </div>
        </section>
    </div>
  
    <div id="login-modal" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(0,0,0,0.7); z-index:100;">
      <div style="background:#fff; margin:10vh auto; padding:2em; border-radius:8px; width:320px; position:relative;">
        <h2>Login / Signup</h2>
        <button id="google-login-btn" style="width:100%; margin-bottom:10px;">Login with Google</button>
        <input type="email" id="email-input" placeholder="Email" style="width:100%; margin-bottom:8px;">
        <input type="password" id="password-input" placeholder="Password" style="width:100%; margin-bottom:8px;">
        <button id="email-login-btn" style="width:100%; margin-bottom:10px;">Login / Signup with Email</button>
        <button id="close-login-modal" title="Close" style="position:absolute; top:8px; right:8px;">&times;</button>
        <div id="login-error" style="color:red; margin-top:8px;"></div>
      </div>
    </div>
    <button id="show-login-modal" style="position:fixed; top:10px; right:10px; z-index:101;">Login</button>

    <!-- Save TAB Modal -->
<div id="save-tab-modal" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(0,0,0,0.7); z-index:1001;">
  <div style="background:#fff; margin:10vh auto; padding:2em; border-radius:8px; width:320px; position:relative;">
    <h2 style="font-size:1.2em; color:#222;">Save TAB Data</h2>
    <input type="text" id="tab-save-name" placeholder="Enter a name..." style="width:100%; margin-bottom:12px;">
    <button id="confirm-save-tab" style="width:100%;">Save</button>
    <button id="close-save-tab-modal" style="position:absolute; top:12px; left:12px; background:#f44336; color:#fff; border-radius:50%; width:32px; height:32px; border:none;">&times;</button>
    <div id="save-tab-error" style="color:red; margin-top:8px;"></div>
  </div>
</div>

<!-- Import TAB Modal -->
<div id="import-tab-modal" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(0,0,0,0.7); z-index:1001;">
  <div style="background:#fff; margin:10vh auto; padding:2em; border-radius:8px; width:340px; position:relative;">
    <h2 style="font-size:1.2em; color:#222;">Import TAB Data</h2>
    <ul id="tab-import-list" style="list-style:none; padding:0; margin-bottom:12px;"></ul>
    <button id="close-import-tab-modal" style="position:absolute; top:12px; left:12px; background:#f44336; color:#fff; border-radius:50%; width:32px; height:32px; border:none;">&times;</button>
    <div id="import-tab-error" style="color:red; margin-top:8px;"></div>
  </div>
</div>

<!-- About Modal -->
<div id="about-modal" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(0,0,0,0.8); z-index:1002;">
  <div style="background:#fff; margin:5vh auto; padding:2em; border-radius:12px; width:90%; max-width:500px; position:relative; box-shadow:0 10px 30px rgba(0,0,0,0.3);">
    <h2 style="font-size:1.8em; color:#333; margin-bottom:1em; text-align:center; border-bottom:2px solid #ffe600; padding-bottom:0.5em;">About Uncle Ali Piano</h2>
    
    <div style="color:#555; line-height:1.6; font-size:1em;">
      <p style="margin-bottom:1em;"><strong>Uncle Ali Piano</strong> makes learning piano fast and easy for beginners and music lovers.</p>
      
      <p style="margin-bottom:1em;">Created by <strong>Uncle Ali (Ali Ibrahim)</strong> a musician, online teacher and film sound engineer from Ghana.</p>
      
      <p style="margin-bottom:1em;">Click here for my socials and tutorials: 
        <a href="https://linktr.ee/uncleali101" target="_blank" style="color:#2196F3; text-decoration:none; font-weight:bold;">linktr.ee/uncleali101</a>
      </p>
      
      <div style="background:#f8f9fa; padding:1em; border-radius:8px; margin:1em 0;">
        <h3 style="color:#333; margin-bottom:0.5em; font-size:1.2em;">This app helps you:</h3>
        <ul style="margin:0; padding-left:1.5em; color:#666;">
          <li>Play in any key</li>
          <li>Play along with songs</li>
          <li>Master chords at your own pace</li>
        </ul>
      </div>
      
      <p style="margin-bottom:0; text-align:center; font-style:italic; color:#666;">
        Our goal is to make piano learning easy, enjoyable, and creative; anytime, anywhere.
      </p>
    </div>
    
    <button id="close-about-modal" title="Close" style="position:absolute; top:12px; right:12px; background:#f44336; color:#fff; border-radius:50%; width:36px; height:36px; border:none; font-size:20px; cursor:pointer;">&times;</button>
  </div>
</div>

<!-- Comment Room Section -->
<section id="comment-room" class="comment-room-section">
  <div class="comment-room-container">
    
    <!-- Header -->
    <div class="comment-room-header">
      <h2 class="comment-room-title">🎹 Comment Room</h2>
      <p class="comment-room-subtitle">
        Share your thoughts, ask questions, or connect with other learners below 👇
      </p>
    </div>
    
    <!-- Main Content Layout -->
    <div class="comment-room-content">
      
      <!-- Main Content Column (70%) -->
      <div class="comment-main-column">
        <div class="comment-card">
          
          <!-- Facebook Comment Box -->
          <div class="comment-section">
            <div class="fb-comments" 
              data-href="https://www.unclealipiano.com/" 
              data-width="100%" 
              data-numposts="5"
              data-colorscheme="light">
            </div>
          </div>
          
        </div>
      </div>
      
      <!-- Vertical Divider -->
      <div class="comment-divider"></div>
      
      <!-- Ad Space Column (30%) -->
      <div class="ad-space-column">
        <div class="ad-space-card">
          <div class="ad-space-content">
            <h3>Ad Space</h3>
            <p>Reserved for Google AdSense</p>
            <div class="ad-placeholder">
              <span>300 x 250</span>
            </div>
          </div>
        </div>
      </div>
      
    </div>
  </div>
</section>

<!-- Facebook SDK Root -->
<div id="fb-root"></div>
<script async defer crossorigin="anonymous" 
  src="https://connect.facebook.net/en_GB/sdk.js#xfbml=1&version=v23.0">
</script>

    <script type="module" src="/js/main.js"></script>
  </body>
</html>
